(this.webpackJsonpstarlink=this.webpackJsonpstarlink||[]).push([[0],{169:function(t,e,a){},325:function(t,e,a){"use strict";a.r(e);var n=a(5),s=a(1),i=a.n(s),o=a(6),c=a.n(o),r=(a(169),a(22)),l=a(23),u=a(29),d=a(28),h=a.p+"static/media/spacex_logo.ad25dfff.svg",p=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("header",{className:"App-header",children:[Object(n.jsx)("img",{src:h,className:"App-logo",alt:"logo"}),Object(n.jsx)("p",{className:"title",children:"StarLink Tracker"})]})}}]),a}(s.Component),j=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"footer",children:"\xa92021 StarLink Tracker. All Rights Reserved. Website Made by Tyler Zhixing Wang"})}}]),a}(s.Component),b=a(91),f=a(114),g=a(337),m=a(340),O=a(341),v=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).ShowSatellite=function(e){e.preventDefault(),console.log("clicked"),t.props.form.validateFields((function(e,a){e||(console.log(a),t.props.onShow(a))}))},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props.form.getFieldDecorator;return Object(n.jsxs)(g.a,Object(f.a)(Object(f.a)({},{labelCol:{xs:{span:24},sm:{span:11}},wrapperCol:{xs:{span:24},sm:{span:13}}}),{},{onSubmit:this.ShowSatellite,className:"sat-setting",children:[Object(n.jsx)(g.a.Item,{label:"Longitude(degree):",children:t("longitude",{rules:[{required:!0,message:"please input your Longitude"}]})(Object(n.jsx)(m.a,{min:-180,max:180,placeholder:"please input longitude",style:{width:"100%"}}))}),Object(n.jsx)(g.a.Item,{label:"Latitude(degree):",children:t("latitude",{rules:[{required:!0,message:"please input your Latitude"}]})(Object(n.jsx)(m.a,{min:-90,max:90,placeholder:"please input Latitude",style:{width:"100%"}}))}),Object(n.jsx)(g.a.Item,{label:"Elevation(meters)",children:t("elevation",{rules:[{required:!0,message:"Please input your Elevation"}]})(Object(n.jsx)(m.a,{placeholder:"Please input Elevation",min:-413,max:8850,style:{width:"100%"}}))}),Object(n.jsx)(g.a.Item,{label:"Altitude(degrees)",children:t("altitude",{rules:[{required:!0,message:"Please input your Altitude"}]})(Object(n.jsx)(m.a,{placeholder:"Please input Altitude",min:0,max:90,style:{width:"100%"}}))}),Object(n.jsx)(g.a.Item,{label:"Duration(secs)",children:t("duration",{rules:[{required:!0,message:"Please input your Duration"}]})(Object(n.jsx)(m.a,{placeholder:"Please input Duration",min:0,max:90,style:{width:"100%"}}))}),Object(n.jsx)(g.a.Item,{className:"show-nearby",children:Object(n.jsx)(O.a,{type:"primary",htmlType:"submit",style:{textAlign:"center"},children:"Find Nearby Satellite"})})]}))}}]),a}(s.Component),x=g.a.create({name:"satellite-setting"})(v),y=a(151),w=a(335),S=a(342),L=a(332),k=a.p+"static/media/satelite.d327b26a.svg",D=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={selected:[],isLoad:!1},t.onShowSatMapStatus=function(){t.props.onShowMap(t.state.selected)},t.onChange=function(e){var a=e.target,n=a.dataInfo,s=a.checked,i=t.state.selected,o=t.addOrRemove(n,s,i);t.setState({selected:o})},t.addOrRemove=function(t,e,a){var n=a.some((function(e){return e.satid===t.satid}));return e&&!n?a=[].concat(Object(b.a)(a),[t]):!e&&n&&(a=a.filter((function(e){return e.satid!==t.satid}))),a},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.props.satInfo?this.props.satInfo.above:[],a=this.props.isLoading;return Object(n.jsxs)("div",{className:"sat-list-box",children:[Object(n.jsx)(O.a,{className:"sat-list-btn",type:"primary",size:"large",onClick:this.onShowSatMapStatus,children:"Track on the map"}),Object(n.jsx)("hr",{}),a?Object(n.jsx)("div",{className:"spin-box",children:Object(n.jsx)(y.a,{size:"large",tip:"loading..."})}):Object(n.jsx)(w.a,{className:"sat-list",itemLayout:"horizontal",dataSource:e,renderItem:function(e){return Object(n.jsx)(w.a.Item,{actions:[Object(n.jsx)(S.a,{dataInfo:e,onChange:t.onChange})],children:Object(n.jsx)(w.a.Item.Meta,{avatar:Object(n.jsx)(L.a,{src:k,size:50}),title:Object(n.jsx)("p",{children:e.satname}),description:"Launch Data: ".concat(e.launchDate)})})}})]})}}]),a}(s.Component),N="8LBHPL-K4DR9H-3WYN6U-4LWC",I="rest/v1/satellite/above",C=a(68),M=a.n(C),P=a(158),T=a(336),A=a(343),E=a(339),F=a(334),R=a(345),B=a(344),W=a(338),q=600,z=960,H=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(r.a)(this,a),(t=e.call(this)).track=function(e){if(!e[0]||!e[0].hasOwnProperty("positions"))throw new Error("no position data");var a=e[0].positions.length,n=(t.props.observeData.duration,t.map.context2),s=new Date,i=0,o=setInterval((function(){var c=new Date,r=0===i?0:c-s,l=new Date(s.getTime()+60*r);if(n.clearRect(0,0,z,q),n.font="bold 14px sans-serif",n.fillStyle="#333",n.textAlign="center",n.fillText(Object(W.a)(l),480,10),i>=a)return clearInterval(o),t.setState({isDrawing:!1}),void(document.getElementsByClassName("hint")[0].innerHTML="");e.forEach((function(e){var a=e.info,n=e.positions;t.drawSat(a,n[i])})),console.log(i),i+=60}),1e3)},t.generateMap=function(e){var a=Object(T.a)().scale(170).translate([480,300]).precision(.1),n=Object(A.a)(),s=Object(F.a)(t.refMap.current).attr("width",z).attr("height",q),i=Object(F.a)(t.refTrack.current).attr("width",z).attr("height",q),o=s.node().getContext("2d"),c=i.node().getContext("2d"),r=Object(E.a)().projection(a).context(o);e.forEach((function(t){o.fillStyle="#B3DDEF",o.strokeStyle="#000",o.globalAlpha=.7,o.beginPath(),r(t),o.fill(),o.stroke(),o.strokeStyle="rgba(220, 220, 220, 0.1)",o.beginPath(),r(n()),o.lineWidth=.1,o.stroke(),o.beginPath(),o.lineWidth=.5,r(n.outline()),o.stroke()})),t.map={context:o,context2:c,projection:a}},t.drawSat=function(e,a){var n=a.satlongitude,s=a.satlatitude;if(n&&s){var i=e.satname.match(/\d+/g).join(""),o=t.map,c=o.projection,r=o.context2,l=c([n,s]);r.fillStyle=t.color(i),r.beginPath(),r.arc(l[0],l[1],4,0,2*Math.PI),r.fill(),r.font="bold 11px sans-serif",r.textAlign="center",r.fillText(i,l[0],l[1]+10)}},t.refMap=i.a.createRef(),t.refTrack=i.a.createRef(),t.state={isLoading:!1,isDrawing:!1},t.map=null,t.color=B.a(R.a),t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;M.a.get("https://unpkg.com/world-atlas@1/world/110m.json").then((function(e){console.log(e);var a=e.data,n=Object(P.a)(a,a.objects.countries).features;t.generateMap(n)})).catch((function(t){console.log(t)}))}},{key:"componentDidUpdate",value:function(t,e,a){var n=this;if(t.satData!==this.props.satData){var s=this.props.observeData,i=s.latitude,o=s.longitude,c=(s.elevation,s.altitude),r=60*s.duration;this.setState({isLoading:!0});var l=this.props.satData.map((function(t){var e=t.satid,a="/api/".concat("rest/v1/satellite/positions","/").concat(e,"/").concat(i,"/").concat(o,"/").concat(c,"/").concat(r,"/&apiKey=").concat(N);return M.a.get(a)}));Promise.all(l).then((function(t){console.log("->",t);var a=t.map((function(t){return t.data}));(n.setState({isLoading:!1,isDrawing:!0}),e.isDrawing)?document.getElementsByClassName("hint")[0].innerHTML="Please wait for these satellite animation to finish before selection new ones!":(console.log(a),n.track(a))})).catch((function(t){console.log(t)}))}}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"map-box",children:[Object(n.jsx)("canvas",{className:"map",ref:this.refMap}),Object(n.jsx)("canvas",{className:"track",ref:this.refTrack}),Object(n.jsx)("div",{className:"hint"})]})}}]),a}(s.Component),K=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={satInfo:null,settings:null,satList:null,isLoadingList:!1},t.showMap=function(e){t.setState({satList:Object(b.a)(e)})},t.showNearbySatellite=function(e){console.log("setting ->",e),t.setState({settings:e}),t.fetchSatellite(e)},t.fetchSatellite=function(e){var a=e.latitude,n=e.longitude,s=e.elevation,i=e.altitude,o="/api/".concat(I,"/").concat(a,"/").concat(n,"/").concat(s,"/").concat(i,"/").concat("52","/&apiKey=").concat(N);t.setState({isLoadingList:!0}),M.a.get(o).then((function(e){console.log(e),t.setState({satInfo:e.data,isLoadingList:!1})})).catch((function(e){console.log("error in fetch satellite list -> ",e),t.setState({isLoadingList:!1})}))},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state,e=t.satInfo,a=t.isLoadingList,s=t.settings,i=t.satList;return Object(n.jsxs)("div",{className:"main",children:[Object(n.jsxs)("div",{className:"left-side",children:[Object(n.jsx)(x,{onShow:this.showNearbySatellite}),Object(n.jsx)(D,{satInfo:e,isLoading:a,onShowMap:this.showMap})]}),Object(n.jsx)("div",{className:"right-side",children:Object(n.jsx)(H,{satData:i,observeData:s})})]})}}]),a}(s.Component);var J=function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(p,{}),Object(n.jsx)(K,{}),Object(n.jsx)(j,{})]})},U=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,346)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,i=e.getLCP,o=e.getTTFB;a(t),n(t),s(t),i(t),o(t)}))};c.a.render(Object(n.jsx)(J,{}),document.getElementById("root")),U()}},[[325,1,2]]]);
//# sourceMappingURL=main.95ba3ee8.chunk.js.map